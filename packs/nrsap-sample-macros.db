{"name":"Drift-travel-with-tiles","type":"script","author":"YDfnQ8kHYo8L2nEG","img":"modules/NRSAP/packs/tiles-icon.webp","scope":"global","command":"// To work properly, this macro requires the module Sequencer as\n// a dependency.\nconst basePath = \"modules/NRSAP/library/travel/hyperspace\";\n\nconst loopingBackground = canvas.background.placeables.find(t => t.data.img.endsWith(\"-loop.webm\"));\nconst coreBackground = canvas.background.placeables.find(t => t.data.img.includes(\"/backgrounds/\"));\n\nif(!coreBackground || !loopingBackground) return;\n\nif(loopingBackground.data.alpha === 0.0){\n    await new FilePicker({\n        type: \"imagevideo\",\n        displayMode: \"tiles\",\n        current: coreBackground.data.img,\n        callback: imagePath => { playSequence(imagePath) }\n    }).browse(`${basePath}/backgrounds/`);\n}else{\n    playSequence();\n}\n\nfunction playSequence(img){\n    \n    if(img){\n\n        new Sequence()\n            .sound(`${basePath}/sounds/drift-entry-hex.ogg`)\n                .volume(0.55)\n            .wait(2100)\n            .effect(`${basePath}/drift-entry-hex.webm`)\n                .anchor(0)\n                .fadeOut(2000, {ease: \"easeOutCubic\", delay: 1000})\n            .wait(2050)\n            .animation()\n                .on(loopingBackground)\n                .opacity(1.0)\n                .volume(0.55)\n            .wait(1500)\n            .thenDo(() => { \n                coreBackground.update({ img: img });\n            })\n            .play()\n\n    }else{\n\n        new Sequence()\n            .sound(`${basePath}/sounds/drift-exit-hex.ogg`)\n                .volume(0.55)\n            .wait(750)\n            .effect(`${basePath}/drift-exit-hex.webm`).anchor(0)\n            .wait(150)\n            .animation()\n                .on(loopingBackground)\n                .opacity(0.0)\n                .volume(0.0)\n            .play()\n\n    }\n\n}","folder":null,"sort":0,"permission":{"default":0,"YDfnQ8kHYo8L2nEG":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.RfWYCJCK13Cog2Zl"}},"_id":"LfFBmWHbfhdr5XB3"}
{"name":"NRSAP-Drift-Travel-Shards","type":"script","author":"YDfnQ8kHYo8L2nEG","img":"modules/NRSAP/packs/drift-icon.webp","scope":"global","command":"// To work properly, this macro requires the module Sequencer as\n// a dependency.\nlet loopingBackground = canvas.background.placeables.find(t => t.data.img.endsWith(\"loop.webm\"));\n\nif(loopingBackground.data.alpha === 0.0){\n\tawait new FilePicker({\n\t\ttype: \"imagevideo\",\n\t\tdisplayMode: \"tiles\",\n\t\tcurrent: canvas.scene.img,\n\t\tcallback: imagePath => { playSequence(imagePath) }\n\t}).browse(\"modules/NRSAP/library/travel/hyperspace/backgrounds/\");\n}else{\n\tplaySequence();\n}\n\nfunction playSequence(img){\n\t\n\tif(img){\n\n\t\tnew Sequence()\n\t\t\t.sound(\"modules/NRSAP/library/travel/hyperspace/sounds/drift-entry-shard.ogg\")\n\t\t\t\t.volume(0.55)\n\t\t\t.wait(2000)\n\t\t\t.effect(\"modules/NRSAP/library/travel/hyperspace/drift-entry-shard.webm\").anchor(0)\n\t\t\t.wait(2950)\n\t\t\t.animation()\n\t\t\t\t.on(loopingBackground)\n\t\t\t\t.opacity(1.0)\n\t\t\t\t.volume(0.55)\n\t\t\t.wait(1500)\n\t\t\t.thenDo(() => { \n\t\t\t\tcanvas.scene.update({ img: img });\n\t\t\t})\n\t\t\t.play()\n\n\t}else{\n\n\t\tnew Sequence()\n\t\t\t.sound(\"modules/NRSAP/library/travel/hyperspace/sounds/drift-exit-shard.ogg\")\n\t\t\t\t.volume(0.55)\n\t\t\t.wait(750)\n\t\t\t.effect(\"modules/NRSAP/library/travel/hyperspace/drift-exit-shard.webm\").anchor(0)\n\t\t\t.wait(150)\n\t\t\t.animation()\n\t\t\t\t.on(loopingBackground)\n\t\t\t\t.opacity(0.0)\n\t\t\t\t.volume(0.0)\n\t\t\t.play()\n\n\t}\n\n}","folder":null,"sort":0,"permission":{"default":0,"YK46QS70OGKGnDLG":3,"YDfnQ8kHYo8L2nEG":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.jQn7RHLK3qLKQzyL"}},"_id":"QPLQD0tTyBG3YWSC"}
{"name":"Sequencer-Hyperspace-Jump","type":"script","author":"YDfnQ8kHYo8L2nEG","img":"modules/NRSAP/library/travel/hyperspace/backgrounds/first-background.jpg","scope":"global","command":"// To work properly, this macro requires the module Sequencer as\n// a dependency.\nlet loopingBackground = canvas.background.placeables.find(t => t.data.img.endsWith(\"loop.webm\"));\n\nif(loopingBackground.data.alpha === 0.0){\n\tawait new FilePicker({\n\t\ttype: \"imagevideo\",\n\t\tdisplayMode: \"tiles\",\n\t\tcurrent: canvas.scene.img,\n\t\tcallback: imagePath => { playSequence(imagePath) }\n\t}).browse(\"modules/NRSAP/library/travel/hyperspace/backgrounds/\");\n}else{\n\tplaySequence();\n}\n\nfunction playSequence(img){\n\t\n\tif(img){\n\n\t\tnew Sequence()\n\t\t\t.sound(\"modules/NRSAP/library/travel/hyperspace/sounds/FTLSound-Intro.ogg\")\n\t\t\t\t.volume(0.55)\n\t\t\t.wait(1850)\n\t\t\t.effect(\"modules/NRSAP/library/travel/hyperspace/hyperspace-start.webm\").anchor(0)\n\t\t\t.wait(1050)\n\t\t\t.animation()\n\t\t\t\t.on(loopingBackground)\n\t\t\t\t.opacity(1.0)\n\t\t\t\t.volume(1.0)\n\t\t\t.wait(1500)\n\t\t\t.thenDo(() => { \n\t\t\t\tcanvas.scene.update({ img: img });\n\t\t\t})\n\t\t\t.play()\n\n\t}else{\n\n\t\tnew Sequence()\n\t\t\t.sound(\"modules/NRSAP/library/travel/hyperspace/sounds/FTLSound-Outro.ogg\")\n\t\t\t\t.volume(0.55)\n\t\t\t.wait(200)\n\t\t\t.effect(\"modules/NRSAP/library/travel/hyperspace/hyperspace-stop.webm\").anchor(0)\n\t\t\t.wait(350)\n\t\t\t.animation()\n\t\t\t\t.on(loopingBackground)\n\t\t\t\t.opacity(0.0)\n\t\t\t\t.volume(0.0)\n\t\t\t.play()\n\n\t}\n\n}","folder":null,"sort":0,"permission":{"default":0,"YK46QS70OGKGnDLG":3,"YDfnQ8kHYo8L2nEG":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.jQn7RHLK3qLKQzyL"}},"_id":"UVnz0mivG3lx4qS0"}
{"name":"Foreground-select","type":"script","author":"YDfnQ8kHYo8L2nEG","img":"modules/NRSAP/library/travel/hyperspace/foregrounds/Scifi-Cockpit-01.png","scope":"global","command":"const basePath = \"modules/NRSAP/library/travel/hyperspace\";\n\nif(canvas.foreground.placeables.length >= 1){\n\n    const content = [\"Which tile do you want to update?<br><br><select style='width:100%'>\"];\n    canvas.foreground.placeables.forEach(tile => {\n        content.push(`<option tile_id=\"${tile.id}\">${tile?.data?.img ? tile?.data?.img : \"No image\"}</option>`)\n    })\n    content.push(\"</select><br>\");\n\n    new Dialog({\n        title: \"Pick foreground tile to update\",\n        content: content,\n        buttons: {\n            one: {\n                icon: `<i class=\"fas fa-image\"></i>`,\n                label: \"Choose Image\",\n                callback: (html) => {\n                    const tileId = html.find(\"select\").find(':selected').attr('tile_id');\n                    const tile = canvas.foreground.placeables.find(tile => tile.id === tileId);\n                    pickForegroundTile(tile);\n                }\n            },\n            two: {\n                icon: `<i class=\"fas fa-eye-slash\"></i>`,\n                label: \"Un/Hide\",\n                callback: (html) => {\n                    const tileId = html.find(\"select\").find(':selected').attr('tile_id');\n                    const tile = canvas.foreground.placeables.find(tile => tile.id === tileId);\n                    unHideTile(tile);\n                }\n            }\n        },\n        default: \"Cancel\"\n    }).render(true);\n}\n\n\nasync function pickForegroundTile(tile){\n\n    let filepickerData = {\n        type: \"imagevideo\",\n        displayMode: \"tiles\",\n        callback: async (imagePath) => { \n            await tile.document.update({\n                \"img\": imagePath\n            });\n        }\n    }\n\n    if(tile.data.img){\n        filepickerData['current'] = tile.data.img;\n    }\n    \n    await new FilePicker(filepickerData).browse(`${basePath}/foregrounds/`);\n\n};\n\nasync function unHideTile(tile){\n  tile.document.update({\n    \"alpha\": tile.data.alpha === 0 ? 1.0 : 0.0\n  });\n}","folder":null,"sort":0,"permission":{"default":0,"YDfnQ8kHYo8L2nEG":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.zxH3KyQoKuiMiFKo"}},"_id":"de7y1yMafTWlKnKk"}
{"name":"NRSAP-Drift-Travel-Hex","type":"script","author":"YDfnQ8kHYo8L2nEG","img":"modules/NRSAP/packs/drift-icon.webp","scope":"global","command":"// To work properly, this macro requires the module Sequencer as\n// a dependency.\nlet loopingBackground = canvas.background.placeables.find(t => t.data.img.endsWith(\"loop.webm\"));\n\nif(loopingBackground.data.alpha === 0.0){\n\tawait new FilePicker({\n\t\ttype: \"imagevideo\",\n\t\tdisplayMode: \"tiles\",\n\t\tcurrent: canvas.scene.img,\n\t\tcallback: imagePath => { playSequence(imagePath) }\n\t}).browse(\"modules/NRSAP/library/travel/hyperspace/backgrounds/\");\n}else{\n\tplaySequence();\n}\n\nfunction playSequence(img){\n\t\n\tif(img){\n\n\t\tnew Sequence()\n\t\t\t.sound(\"modules/NRSAP/library/travel/hyperspace/sounds/drift-entry-hex.ogg\")\n\t\t\t\t.volume(0.55)\n\t\t\t.wait(2100)\n\t\t\t.effect(\"modules/NRSAP/library/travel/hyperspace/drift-entry-hex.webm\").anchor(0)\n\t\t\t.wait(2950)\n\t\t\t.animation()\n\t\t\t\t.on(loopingBackground)\n\t\t\t\t.opacity(1.0)\n\t\t\t\t.volume(0.55)\n\t\t\t.wait(1500)\n\t\t\t.thenDo(() => { \n\t\t\t\tcanvas.scene.update({ img: img });\n\t\t\t})\n\t\t\t.play()\n\n\t}else{\n\n\t\tnew Sequence()\n\t\t\t.sound(\"modules/NRSAP/library/travel/hyperspace/sounds/drift-exit-hex.ogg\")\n\t\t\t\t.volume(0.55)\n\t\t\t.wait(750)\n\t\t\t.effect(\"modules/NRSAP/library/travel/hyperspace/drift-exit-hex.webm\").anchor(0)\n\t\t\t.wait(150)\n\t\t\t.animation()\n\t\t\t\t.on(loopingBackground)\n\t\t\t\t.opacity(0.0)\n\t\t\t\t.volume(0.0)\n\t\t\t.play()\n\n\t}\n\n}","folder":null,"sort":0,"permission":{"default":0,"YK46QS70OGKGnDLG":3,"YDfnQ8kHYo8L2nEG":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.jQn7RHLK3qLKQzyL"}},"_id":"t7PmQha36rG9V3pg"}
