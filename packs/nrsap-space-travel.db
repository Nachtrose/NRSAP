{"name":"Foreground-select","type":"script","author":"YDfnQ8kHYo8L2nEG","img":"modules/NRSAP/packs/cockpit-icon.webp","scope":"global","command":"const basePath = \"modules/NRSAP/library/travel/hyperspace\";\n\nif(canvas.foreground.placeables.length >= 1){\n\n    const content = [\"Which tile do you want to update?<br><br><select style='width:100%'>\"];\n    canvas.foreground.placeables.forEach(tile => {\n        content.push(`<option tile_id=\"${tile.id}\">${tile?.data?.img ? tile?.data?.img : \"No image\"}</option>`)\n    })\n    content.push(\"</select><br>\");\n\n    new Dialog({\n        title: \"Pick foreground tile to update\",\n        content: content,\n        buttons: {\n            one: {\n                icon: `<i class=\"fas fa-image\"></i>`,\n                label: \"Choose Image\",\n                callback: (html) => {\n                    const tileId = html.find(\"select\").find(':selected').attr('tile_id');\n                    const tile = canvas.foreground.placeables.find(tile => tile.id === tileId);\n                    pickForegroundTile(tile);\n                }\n            },\n            two: {\n                icon: `<i class=\"fas fa-eye-slash\"></i>`,\n                label: \"Un/Hide\",\n                callback: (html) => {\n                    const tileId = html.find(\"select\").find(':selected').attr('tile_id');\n                    const tile = canvas.foreground.placeables.find(tile => tile.id === tileId);\n                    unHideTile(tile);\n                }\n            }\n        },\n        default: \"Cancel\"\n    }).render(true);\n}\n\n\nasync function pickForegroundTile(tile){\n\n    let filepickerData = {\n        type: \"imagevideo\",\n        displayMode: \"tiles\",\n        callback: async (imagePath) => { \n            await tile.document.update({\n                \"img\": imagePath\n            });\n        }\n    }\n\n    if(tile.data.img){\n        filepickerData['current'] = tile.data.img;\n    }\n    \n    await new FilePicker(filepickerData).browse(`${basePath}/foregrounds/`);\n\n};\n\nasync function unHideTile(tile){\n  tile.document.update({\n    \"alpha\": tile.data.alpha === 0 ? 1.0 : 0.0\n  });\n}","folder":null,"sort":0,"permission":{"default":0,"YDfnQ8kHYo8L2nEG":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.zxH3KyQoKuiMiFKo"}},"_id":"1OrqzaUAZE0fxIPP"}
{"_id":"45rDsqUhXDMFC1QU","name":"NRSAP-Drift-Travel-Hex ( autoupdate )","type":"script","author":"YDfnQ8kHYo8L2nEG","img":"modules/NRSAP/packs/drift-icon-au.webp","scope":"global","command":"const compediumName = 'NRSAP.nrsap-space-travel';\nmacroRun('NRSAP-Drift-Travel-Hex', compediumName);\n\nasync function macroRun(macroName, compendiumName='NRSAP.nrsap-space-travel') {  \n  let pack = game.packs.get(compendiumName);\n  let macro = ( await pack.getDocuments() ).find(i => (i.data.name==macroName) );\n  await macro.execute();    \n}","folder":null,"sort":0,"permission":{"default":0,"YDfnQ8kHYo8L2nEG":3},"flags":{"core":{"sourceId":"Macro.sMcmCKlhwFRpnREn"}}}
{"name":"Hyperspace-with-tiles","type":"script","author":"YDfnQ8kHYo8L2nEG","img":"modules/NRSAP/packs/tiles-icon-hyperspace.webp","scope":"global","command":"// To work properly, this macro requires the module Sequencer as\n// a dependency.\nconst basePath = \"modules/NRSAP/library/travel/hyperspace\";\n\nconst loopingBackground = canvas.background.placeables.find(t => t.data.img.endsWith(\"-loop.webm\"));\nconst coreBackground = canvas.background.placeables.find(t => t.data.img.includes(\"/backgrounds/\"));\n\nif(!coreBackground || !loopingBackground) return;\n\nif(loopingBackground.data.alpha === 0.0){\n    await new FilePicker({\n        type: \"imagevideo\",\n        displayMode: \"tiles\",\n        current: coreBackground.data.img,\n        callback: imagePath => { playSequence(imagePath) }\n    }).browse(`${basePath}/backgrounds/`);\n}else{\n    playSequence();\n}\n\nfunction playSequence(img){\n    \n    if(img){\n\n        new Sequence()\n            .sound(`${basePath}/sounds/FTLSound-Intro.ogg`)\n                .volume(0.55)\n            .wait(1850)\n            .effect(`${basePath}/hyperspace-start.webm`)\n                .anchor(0)\n\n            .wait(1050)\n            .animation()\n                .on(loopingBackground)\n                .opacity(1.0)\n                .volume(0.55)\n            .wait(1500)\n            .thenDo(() => { \n                coreBackground.document.update({ img: img });\n            })\n            .play()\n\n    }else{\n\n        new Sequence()\n            .sound(`${basePath}/sounds/FTLSound-Outro.ogg`)\n                .volume(0.55)\n            .wait(150)\n            .effect(`${basePath}/hyperspace-stop.webm`).anchor(0)\n            .wait(350)\n            .animation()\n                .on(loopingBackground)\n                .opacity(0.0)\n                .volume(0.0)\n            .play()\n\n    }\n\n}","folder":null,"sort":0,"permission":{"default":0,"YDfnQ8kHYo8L2nEG":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.RfWYCJCK13Cog2Zl"}},"_id":"6jkC0OBiPoVaLFzc"}
{"name":"Foreground-select ( autoupdate )","type":"script","author":"YDfnQ8kHYo8L2nEG","img":"modules/NRSAP/packs/cockpit-icon-au.webp","scope":"global","command":"const compediumName = 'NRSAP.nrsap-space-travel';\nmacroRun('Foreground-select', compediumName);\n\nasync function macroRun(macroName, compendiumName='NRSAP.nrsap-space-travel') {  \n  let pack = game.packs.get(compendiumName);\n  let macro = ( await pack.getDocuments() ).find(i => (i.data.name==macroName) );\n  await macro.execute();    \n}","folder":null,"sort":0,"permission":{"default":0,"YDfnQ8kHYo8L2nEG":3},"flags":{"core":{"sourceId":"Macro.mbjENFh3JBgQ4KSC"}},"_id":"8AU13J9kQQI3i8nB"}
{"name":"Drift-travel-with-tiles-Hex ( autoupdate )","type":"script","author":"YDfnQ8kHYo8L2nEG","img":"modules/NRSAP/packs/tiles-icon-drift-au.webp","scope":"global","command":"const compediumName = 'NRSAP.nrsap-space-travel';\nmacroRun('Drift-travel-with-tiles-Hex', compediumName);\n\nasync function macroRun(macroName, compendiumName='NRSAP.nrsap-space-travel') {  \n  let pack = game.packs.get(compendiumName);\n  let macro = ( await pack.getDocuments() ).find(i => (i.data.name==macroName) );\n  await macro.execute();    \n}","folder":null,"sort":0,"permission":{"default":0,"YDfnQ8kHYo8L2nEG":3},"flags":{"core":{"sourceId":"Macro.O98MLObOFyIPm27M"}},"_id":"BdTYN4cNjPb3Ass2"}
{"_id":"JLHF3y0br1YBR8HQ","name":"Sequencer-Hyperspace-Jump","type":"script","author":"YDfnQ8kHYo8L2nEG","img":"modules/NRSAP/packs/planet-icon.webp","scope":"global","command":"// To work properly, this macro requires the module Sequencer as\n// a dependency.\nlet loopingBackground = canvas.background.placeables.find(t => t.data.img.endsWith(\"loop.webm\"));\n\nif(loopingBackground.data.alpha === 0.0){\n\tawait new FilePicker({\n\t\ttype: \"imagevideo\",\n\t\tdisplayMode: \"tiles\",\n\t\tcurrent: canvas.scene.img,\n\t\tcallback: imagePath => { playSequence(imagePath) }\n\t}).browse(\"modules/NRSAP/library/travel/hyperspace/backgrounds/\");\n}else{\n\tplaySequence();\n}\n\nfunction playSequence(img){\n\t\n\tif(img){\n\n\t\tnew Sequence()\n\t\t\t.sound(\"modules/NRSAP/library/travel/hyperspace/sounds/FTLSound-Intro.ogg\")\n\t\t\t\t.volume(0.55)\n\t\t\t.wait(1850)\n\t\t\t.effect(\"modules/NRSAP/library/travel/hyperspace/hyperspace-start.webm\").anchor(0)\n\t\t\t.wait(1350)\n\t\t\t.animation()\n\t\t\t\t.on(loopingBackground)\n\t\t\t\t.opacity(1.0)\n\t\t\t\t.volume(1.0)\n\t\t\t.wait(1500)\n\t\t\t.thenDo(() => { \n\t\t\t\tcanvas.scene.update({ img: img });\n\t\t\t})\n\t\t\t.play()\n\n\t}else{\n\n\t\tnew Sequence()\n\t\t\t.sound(\"modules/NRSAP/library/travel/hyperspace/sounds/FTLSound-Outro.ogg\")\n\t\t\t\t.volume(0.55)\n\t\t\t.wait(200)\n\t\t\t.effect(\"modules/NRSAP/library/travel/hyperspace/hyperspace-stop.webm\").anchor(0)\n\t\t\t.wait(350)\n\t\t\t.animation()\n\t\t\t\t.on(loopingBackground)\n\t\t\t\t.opacity(0.0)\n\t\t\t\t.volume(0.0)\n\t\t\t.play()\n\n\t}\n\n}","folder":null,"sort":0,"permission":{"default":0,"YK46QS70OGKGnDLG":3,"YDfnQ8kHYo8L2nEG":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.jQn7RHLK3qLKQzyL"}}}
{"name":"Drift-travel-with-tiles-Hex","type":"script","author":"YDfnQ8kHYo8L2nEG","img":"modules/NRSAP/packs/tiles-icon-drift.webp","scope":"global","command":"// To work properly, this macro requires the module Sequencer as\n// a dependency.\nconst basePath = \"modules/NRSAP/library/travel/hyperspace\";\n\nconst loopingBackground = canvas.background.placeables.find(t => t.data.img.endsWith(\"-loop.webm\"));\nconst coreBackground = canvas.background.placeables.find(t => t.data.img.includes(\"/backgrounds/\"));\n\nif(!coreBackground || !loopingBackground) return;\n\nif(loopingBackground.data.alpha === 0.0){\n    await new FilePicker({\n        type: \"imagevideo\",\n        displayMode: \"tiles\",\n        current: coreBackground.data.img,\n        callback: imagePath => { playSequence(imagePath) }\n    }).browse(`${basePath}/backgrounds/`);\n}else{\n    playSequence();\n}\n\nfunction playSequence(img){\n    \n    if(img){\n\n        new Sequence()\n            .sound(`${basePath}/sounds/drift-entry-hex.ogg`)\n                .volume(0.55)\n            .wait(2100)\n            .effect(`${basePath}/drift-entry-hex.webm`)\n                .anchor(0)\n                .fadeOut(2000, {ease: \"easeOutCubic\", delay: 1000})\n            .wait(2050)\n            .animation()\n                .on(loopingBackground)\n                .opacity(1.0)\n                .volume(0.55)\n            .wait(1500)\n            .thenDo(() => { \n                coreBackground.document.update({ img: img });\n            })\n            .play()\n\n    }else{\n\n        new Sequence()\n            .sound(`${basePath}/sounds/drift-exit-hex.ogg`)\n                .volume(0.55)\n            .wait(750)\n            .effect(`${basePath}/drift-exit-hex.webm`).anchor(0)\n            .wait(150)\n            .animation()\n                .on(loopingBackground)\n                .opacity(0.0)\n                .volume(0.0)\n            .play()\n\n    }\n\n}","folder":null,"sort":0,"permission":{"default":0,"YDfnQ8kHYo8L2nEG":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.RfWYCJCK13Cog2Zl"}},"_id":"Oa1HnSnS3fU3qwfY"}
{"_id":"Oy7E4cEfsmxTXWnz","name":"NRSAP-Drift-Travel-Shards ( autoupdate )","type":"script","author":"YDfnQ8kHYo8L2nEG","img":"modules/NRSAP/packs/drift-icon-au.webp","scope":"global","command":"const compediumName = 'NRSAP.nrsap-space-travel';\nmacroRun('NRSAP-Drift-Travel-Shards', compediumName);\n\nasync function macroRun(macroName, compendiumName='NRSAP.nrsap-space-travel') {  \n  let pack = game.packs.get(compendiumName);\n  let macro = ( await pack.getDocuments() ).find(i => (i.data.name==macroName) );\n  await macro.execute();    \n}","folder":null,"sort":0,"permission":{"default":0,"YDfnQ8kHYo8L2nEG":3},"flags":{"core":{"sourceId":"Macro.YAre3c7L80fZQoTo"}}}
{"name":"Hyperspace-with-tiles ( autoupdate )","type":"script","author":"YDfnQ8kHYo8L2nEG","img":"modules/NRSAP/packs/tiles-icon-hyperspace-au.webp","scope":"global","command":"const compediumName = 'NRSAP.nrsap-space-travel';\nmacroRun('Hyperspace-with-tiles', compediumName);\n\nasync function macroRun(macroName, compendiumName='NRSAP.nrsap-space-travel') {  \n  let pack = game.packs.get(compendiumName);\n  let macro = ( await pack.getDocuments() ).find(i => (i.data.name==macroName) );\n  await macro.execute();    \n}","folder":null,"sort":0,"permission":{"default":0,"YDfnQ8kHYo8L2nEG":3},"flags":{"core":{"sourceId":"Macro.Uvfw4GqAtXvESMBg"}},"_id":"TiUB8FZWPxa4RtK5"}
{"_id":"VQCSM9n8f0GdG1pV","name":"Sequencer-Hyperspace-Jump ( autoupdate )","type":"script","author":"YDfnQ8kHYo8L2nEG","img":"modules/NRSAP/packs/planet-icon-au.webp","scope":"global","command":"const compediumName = 'NRSAP.nrsap-space-travel';\nmacroRun('Sequencer-Hyperspace-Jump', compediumName);\n\nasync function macroRun(macroName, compendiumName='NRSAP.nrsap-space-travel') {  \n  let pack = game.packs.get(compendiumName);\n  let macro = ( await pack.getDocuments() ).find(i => (i.data.name==macroName) );\n  await macro.execute();    \n}","folder":null,"sort":0,"permission":{"default":0,"YDfnQ8kHYo8L2nEG":3},"flags":{"core":{"sourceId":"Macro.A0CWcTk2PMFReV3h"}}}
{"name":"NRSAP-Drift-Travel-Hex","type":"script","author":"YDfnQ8kHYo8L2nEG","img":"modules/NRSAP/packs/drift-icon.webp","scope":"global","command":"// To work properly, this macro requires the module Sequencer as\n// a dependency.\nlet loopingBackground = canvas.background.placeables.find(t => t.data.img.endsWith(\"loop.webm\"));\n\nif(loopingBackground.data.alpha === 0.0){\n\tawait new FilePicker({\n\t\ttype: \"imagevideo\",\n\t\tdisplayMode: \"tiles\",\n\t\tcurrent: canvas.scene.img,\n\t\tcallback: imagePath => { playSequence(imagePath) }\n\t}).browse(\"modules/NRSAP/library/travel/hyperspace/backgrounds/\");\n}else{\n\tplaySequence();\n}\n\nfunction playSequence(img){\n\t\n\tif(img){\n\n\t\tnew Sequence()\n\t\t\t.sound(\"modules/NRSAP/library/travel/hyperspace/sounds/drift-entry-hex.ogg\")\n\t\t\t\t.volume(0.55)\n\t\t\t.wait(2100)\n\t\t\t.effect(\"modules/NRSAP/library/travel/hyperspace/drift-entry-hex.webm\").anchor(0)\n\t\t\t.wait(2950)\n\t\t\t.animation()\n\t\t\t\t.on(loopingBackground)\n\t\t\t\t.opacity(1.0)\n\t\t\t\t.volume(0.55)\n\t\t\t.wait(1500)\n\t\t\t.thenDo(() => { \n\t\t\t\tcanvas.scene.update({ img: img });\n\t\t\t})\n\t\t\t.play()\n\n\t}else{\n\n\t\tnew Sequence()\n\t\t\t.sound(\"modules/NRSAP/library/travel/hyperspace/sounds/drift-exit-hex.ogg\")\n\t\t\t\t.volume(0.55)\n\t\t\t.wait(750)\n\t\t\t.effect(\"modules/NRSAP/library/travel/hyperspace/drift-exit-hex.webm\").anchor(0)\n\t\t\t.wait(150)\n\t\t\t.animation()\n\t\t\t\t.on(loopingBackground)\n\t\t\t\t.opacity(0.0)\n\t\t\t\t.volume(0.0)\n\t\t\t.play()\n\n\t}\n\n}","folder":null,"sort":0,"permission":{"default":0,"YK46QS70OGKGnDLG":3,"YDfnQ8kHYo8L2nEG":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.jQn7RHLK3qLKQzyL"}},"_id":"VkzffSqSE99awOIJ"}
{"name":"NRSAP-Drift-Travel-Shards","type":"script","author":"YDfnQ8kHYo8L2nEG","img":"modules/NRSAP/packs/drift-icon.webp","scope":"global","command":"// To work properly, this macro requires the module Sequencer as\n// a dependency.\nlet loopingBackground = canvas.background.placeables.find(t => t.data.img.endsWith(\"loop.webm\"));\n\nif(loopingBackground.data.alpha === 0.0){\n\tawait new FilePicker({\n\t\ttype: \"imagevideo\",\n\t\tdisplayMode: \"tiles\",\n\t\tcurrent: canvas.scene.img,\n\t\tcallback: imagePath => { playSequence(imagePath) }\n\t}).browse(\"modules/NRSAP/library/travel/hyperspace/backgrounds/\");\n}else{\n\tplaySequence();\n}\n\nfunction playSequence(img){\n\t\n\tif(img){\n\n\t\tnew Sequence()\n\t\t\t.sound(\"modules/NRSAP/library/travel/hyperspace/sounds/drift-entry-shard.ogg\")\n\t\t\t\t.volume(0.55)\n\t\t\t.wait(2000)\n\t\t\t.effect(\"modules/NRSAP/library/travel/hyperspace/drift-entry-shard.webm\").anchor(0)\n\t\t\t.wait(2950)\n\t\t\t.animation()\n\t\t\t\t.on(loopingBackground)\n\t\t\t\t.opacity(1.0)\n\t\t\t\t.volume(0.55)\n\t\t\t.wait(1500)\n\t\t\t.thenDo(() => { \n\t\t\t\tcanvas.scene.update({ img: img });\n\t\t\t})\n\t\t\t.play()\n\n\t}else{\n\n\t\tnew Sequence()\n\t\t\t.sound(\"modules/NRSAP/library/travel/hyperspace/sounds/drift-exit-shard.ogg\")\n\t\t\t\t.volume(0.55)\n\t\t\t.wait(750)\n\t\t\t.effect(\"modules/NRSAP/library/travel/hyperspace/drift-exit-shard.webm\").anchor(0)\n\t\t\t.wait(150)\n\t\t\t.animation()\n\t\t\t\t.on(loopingBackground)\n\t\t\t\t.opacity(0.0)\n\t\t\t\t.volume(0.0)\n\t\t\t.play()\n\n\t}\n\n}","folder":null,"sort":0,"permission":{"default":0,"YDfnQ8kHYo8L2nEG":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.jQn7RHLK3qLKQzyL"}},"_id":"brLGCnJcAg8rNbPy"}
{"name":"Drift-travel-with-tiles-Shards","type":"script","author":"YDfnQ8kHYo8L2nEG","img":"modules/NRSAP/packs/tiles-icon-drift.webp","scope":"global","command":"// To work properly, this macro requires the module Sequencer as\n// a dependency.\nconst basePath = \"modules/NRSAP/library/travel/hyperspace\";\n\nconst loopingBackground = canvas.background.placeables.find(t => t.data.img.endsWith(\"-loop.webm\"));\nconst coreBackground = canvas.background.placeables.find(t => t.data.img.includes(\"/backgrounds/\"));\n\nif(!coreBackground || !loopingBackground) return;\n\nif(loopingBackground.data.alpha === 0.0){\n    await new FilePicker({\n        type: \"imagevideo\",\n        displayMode: \"tiles\",\n        current: coreBackground.data.img,\n        callback: imagePath => { playSequence(imagePath) }\n    }).browse(`${basePath}/backgrounds/`);\n}else{\n    playSequence();\n}\n\nfunction playSequence(img){\n    \n    if(img){\n\n        new Sequence()\n            .sound(`${basePath}/sounds/drift-entry-shard.ogg`)\n                .volume(0.55)\n            .wait(2100)\n            .effect(`${basePath}/drift-entry-shard.webm`)\n                .anchor(0)\n                .fadeOut(2000, {ease: \"easeOutCubic\", delay: 1000})\n            .wait(2050)\n            .animation()\n                .on(loopingBackground)\n                .opacity(1.0)\n                .volume(0.55)\n            .wait(1500)\n            .thenDo(() => { \n                coreBackground.document.update({ img: img });\n            })\n            .play()\n\n    }else{\n\n        new Sequence()\n            .sound(`${basePath}/sounds/drift-exit-shard.ogg`)\n                .volume(0.55)\n            .wait(750)\n            .effect(`${basePath}/drift-exit-shard.webm`).anchor(0)\n            .wait(150)\n            .animation()\n                .on(loopingBackground)\n                .opacity(0.0)\n                .volume(0.0)\n            .play()\n\n    }\n\n}","folder":null,"sort":0,"permission":{"default":0,"YDfnQ8kHYo8L2nEG":3},"flags":{"core":{"sourceId":"Macro.9POfPGVhDx7rOqoM"}},"_id":"gtpcq7vgXuz8CzPw"}
{"name":"Drift-travel-with-tiles-Shards ( autoupdate )","type":"script","author":"YDfnQ8kHYo8L2nEG","img":"modules/NRSAP/packs/tiles-icon-drift-au.webp","scope":"global","command":"const compediumName = 'NRSAP.nrsap-space-travel';\nmacroRun('Drift-travel-with-tiles-Shards', compediumName);\n\nasync function macroRun(macroName, compendiumName='NRSAP.nrsap-space-travel') {  \n  let pack = game.packs.get(compendiumName);\n  let macro = ( await pack.getDocuments() ).find(i => (i.data.name==macroName) );\n  await macro.execute();    \n}","folder":null,"sort":0,"permission":{"default":0,"YDfnQ8kHYo8L2nEG":3},"flags":{"core":{"sourceId":"Macro.vaAbgm85QGcehFme"}},"_id":"vOycgRiQbsn7FLA8"}
